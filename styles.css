:root {
    /* === ПУЛЬТ УПРАВЛЕНИЯ ТЕМОЙ ==================================================
       Это основной файл стилей проекта. Ниже — полный оригинальный контент, 
       восстановленный из working copy. Я заменил сокращённый вариант на полный.
    ============================================================================== */

    --bg: #0b0f14;
    --bg-2: #0f1318;
    --text: #e6eef6;
    --muted: #9aa6b2;
    --accent: #6ea8fe;
    --accent-2: #4f9cff;
    --success: #7ee787;
    --danger: #ff6b6b;
    --glass: rgba(255,255,255,0.04);
    --card-radius: 12px;
}

/* GLOBAL LAYOUT --------------------------------------------------------------- */
* { box-sizing: border-box; }
html,body { height:100%; margin:0; padding:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: var(--bg); color:var(--text); }

.container { max-width: 1200px; margin: 0 auto; padding: 24px; }

header.app-header { display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 0; }
.header-left { display:flex; align-items:center; gap:12px; }
.brand { font-weight:700; font-size:1.05rem; letter-spacing:-0.02em; }
.search { background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); padding:8px 10px; border-radius:8px; color:var(--text); }

/* SIDEBAR -------------------------------------------------------------------- */
.sidebar { width:280px; background: linear-gradient(180deg, rgba(255,255,255,0.012), transparent); border-right:1px solid rgba(255,255,255,0.03); padding:12px; height:100vh; position:fixed; left:0; top:0; }
.sidebar .logo { font-weight:800; margin-bottom:8px; }
.nav { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:6px; }
.nav-item { display:flex; align-items:center; gap:10px; padding:10px; border-radius:10px; color:var(--muted); cursor:pointer; }
.nav-item:hover { background: rgba(255,255,255,0.02); color:var(--text); }
.nav-item.active { background: linear-gradient(90deg, rgba(79,156,255,0.12), rgba(110,168,254,0.06)); color:var(--text); box-shadow: 0 8px 20px rgba(79,156,255,0.06); border-left:3px solid var(--accent-2); }

/* MAIN AREA ------------------------------------------------------------------ */
.main { margin-left: 300px; padding: 28px; }
.card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); padding:16px; border-radius:var(--card-radius); }
.grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; }

/* CHAT / MESSAGES ------------------------------------------------------------ */
.chat-container { display:flex; flex-direction:column; gap:12px; }
.message { display:flex; gap:12px; align-items:flex-start; }
.message .avatar { width:40px; height:40px; border-radius:10px; background:var(--glass); }
.message .body { background: rgba(255,255,255,0.02); padding:10px 12px; border-radius:10px; color:var(--text); }
.message.user .body { background: linear-gradient(180deg, rgba(79,156,255,0.12), rgba(79,156,255,0.06)); color:#061526; }

/* FORMS ---------------------------------------------------------------------- */
.input { display:block; width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:rgba(255,255,255,0.01); color:var(--text); }
.button { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; background:var(--accent); color:#061526; border:none; cursor:pointer; }
.button.ghost { background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--text); }

/* UTILITIES ------------------------------------------------------------------ */
.flex { display:flex; }
.center { display:flex; align-items:center; justify-content:center; }
.mt-8 { margin-top:8px; }

/* FOOTER --------------------------------------------------------------------- */
.app-footer { margin-top:24px; padding:12px 0; color:var(--muted); font-size:0.9rem; text-align:center; }

/* --------------------------------------------------------------------------- */
/* НИЖЕ — БЕЗОПАСНЫЕ ДОПОЛНЕНИЯ ДЛЯ СОВРЕМЕННОГО ВНЕШНЕГО ВИДА (не ломают селекторы) */
:root {
  /* Доп. системные переменные */
  --space-unit: 0.75rem;
  --soft-elevation: 0 8px 24px rgba(0,0,0,0.45);
}

html, body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
body { font-weight: 300; letter-spacing: -0.01em; }

nav.h-12 { height: 3rem; }
.main-nav-item { padding: 0.45rem 0.65rem; border-radius: 0.5rem; transition: transform 180ms ease, background-color 180ms ease, box-shadow 180ms ease; }
.main-nav-item:hover { transform: translateY(-2px); box-shadow: var(--soft-elevation); }

#sidebar { padding: calc(var(--space-unit) * 0.6) 0.5rem 0.75rem 0.5rem; -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); }
#sidebar .h-12 { padding-left: 1rem; padding-right: 0.75rem; }
#sidebar .text-xl { font-weight: 600; letter-spacing: -0.02em; }

.sidebar-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem 0.8rem; border-radius: 0.6rem; transition: background-color 180ms ease, transform 180ms ease, box-shadow 220ms ease; }
.sidebar-item:not(.active):hover { transform: translateX(4px); box-shadow: 0 6px 18px rgba(0,0,0,0.32); }
.sidebar-item.active { border-left: 3px solid rgba(79,156,255,0.95); box-shadow: 0 8px 28px rgba(79,156,255,0.035); background: linear-gradient(180deg, rgba(255,255,255,0.015), transparent); }

#new-chat-btn, #new-note-btn, #new-diagram-btn { border-radius: 0.65rem; padding: 0.5rem 0.875rem; box-shadow: 0 6px 18px rgba(0,0,0,0.35); transition: transform 140ms ease, box-shadow 200ms ease; }
#new-chat-btn:active { transform: scale(0.995); }

.chat-action-btn { border-radius: 0.6rem; padding: 0.45rem; min-width: 40px; min-height: 40px; box-shadow: 0 8px 22px rgba(0,0,0,0.45); transition: transform 150ms ease, box-shadow 200ms ease, background-color 160ms ease; }
.chat-action-btn:hover { transform: translateY(-4px); }
.chat-action-btn.active { transform: translateY(-1px) scale(1.02); }

#chat-settings-panel, #notepad-settings-panel { border-radius: 12px; box-shadow: 0 18px 40px rgba(0,0,0,0.55); border: 1px solid rgba(255,255,255,0.06); }

.prose { line-height: 1.6; font-size: 0.98rem; }
.prose h1, .prose h2, .prose h3 { letter-spacing: -0.02em; margin-top: 1rem; margin-bottom: 0.6rem; }
.prose pre { border-radius: 0.6rem; padding: 0.85rem; }
.prose code { font-size: 0.9em; }

.note-card { border-radius: 12px; padding: 1rem; }
.note-card:hover { transform: translateY(-6px); box-shadow: 0 18px 36px rgba(0,0,0,0.45); }

#chat-form { padding: 0.75rem; }
#chat-input { border-radius: 0.6rem; padding: 0.7rem; min-height: 48px; max-height: 240px; }

.modal-content { border-radius: 1rem; }
.modal-overlay { background-color: rgba(0,0,0,0.6); }

#in-app-notification > div { animation: none; box-shadow: 0 12px 30px rgba(0,0,0,0.55); }
* { scrollbar-color: var(--muted) var(--bg-2); }

:focus { outline: none; }
:focus-visible { outline: 3px solid rgba(79,156,255,0.95); outline-offset: 3px; border-radius: 0.35rem; }

@media (max-width: 640px) { .sidebar-item { padding: 0.5rem; } .chat-action-btn { min-width: 36px; min-height: 36px; } }
